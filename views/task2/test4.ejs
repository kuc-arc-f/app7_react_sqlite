<!--
2019/08/31 11:45
イベント処理の見直し、改善したい。    
-->
<h1>TEst4</h1>
<hr />
<div id="app"></div>

<!-- -->
<script type="text/babel">

class Create extends React.Component {
    constructor(props){
        super(props)
        this.state = {title: '', description: ''}
    }
    handleChangeTitle(e){
        this.setState({title: e.target.value})
    }
    handleChangeDesc(e){
        this.setState({description: e.target.value})
    }
    handleSubmit(e){
        e.preventDefault()
        const task = {
        title: this.state.title,
        content: this.state.description
        }
        let uri = '/api/tasks_new'
        axios.post(uri, task ).then((response) => {
        window.location.href="/tasks"
        console.log("success")
        })
    }
    test1(value){
    //    console.log("#test1")
        console.log(value)
        alert(value)
        var d = document.getElementById("content").getAttribute("value");
        console.log(d)
    }
    render() {
    return (
    <div>
    <form onSubmit={this.handleSubmit.bind(this)}>
        <div className="row">
        <div className="col-md-6">
            <div className="form-group">
            <label>Title:</label>
            <input type="text" className="form-control" onChange={this.handleChangeTitle.bind(this)}/>
            </div>
        </div>
        </div>
        <div className="row">
            <div className="col-md-6">
            <div className="form-group">
                <label>Description:</label>
                <input type="text" id="content" value="1111"
                 className="form-control col-md-6" onChange={this.handleChangeDesc.bind(this)}/>
            </div>
            </div>
        </div><br />
        <div className="form-group">
            <button className="btn btn-primary">Create</button>
        </div>
    </form>
    <hr />
    <a href='#' onClick={this.test1.bind(this, 1)}>[ test ]</a>
    </div>
    )
    }
}
ReactDOM.render(<Create />, document.getElementById('app'));
</script>